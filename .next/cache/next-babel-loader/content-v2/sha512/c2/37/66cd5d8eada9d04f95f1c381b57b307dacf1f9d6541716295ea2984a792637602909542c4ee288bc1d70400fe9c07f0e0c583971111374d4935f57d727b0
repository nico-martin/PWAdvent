{"ast":null,"code":"import _extends from \"C:/Users/admin/Documents/Dev/PWAdvent/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"C:/Users/admin/Documents/Dev/PWAdvent/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"C:/Users/admin/Documents/Dev/PWAdvent/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"C:/Users/admin/Documents/Dev/PWAdvent/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\admin\\\\Documents\\\\Dev\\\\PWAdvent\\\\theme\\\\Image\\\\LazyImage.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n// @ts-ignore\nimport lazySizes from 'lazysizes';\nimport 'lazysizes/plugins/attrchange/ls.attrchange';\nimport 'lazysizes/plugins/bgset/ls.bgset';\nimport 'lazysizes/plugins/respimg/ls.respimg';\nimport React from 'react';\nimport cn from '@utils/classnames';\nimport styles from './LazyImage.module.css';\nvar BASE = 'lazyimage';\nlazySizes.cfg.lazyClass = styles.imageLazyload;\nlazySizes.cfg.loadingClass = styles.imageLazyloading;\nlazySizes.cfg.loadedClass = styles.imageLazyloaded;\ndocument.addEventListener('lazyloaded', function (e) {\n  lazySizesFindParent(e.target).classList.add(styles.isLoaded);\n});\n\nvar lazySizesFindParent = function lazySizesFindParent(el) {\n  while ((el = el.parentElement) && !el.classList.contains(BASE)) {\n    ;\n  }\n\n  return el;\n};\n\nvar LazyImage = function LazyImage(_ref) {\n  _s();\n\n  var image = _ref.image,\n      _ref$background = _ref.background,\n      background = _ref$background === void 0 ? false : _ref$background,\n      alt = _ref.alt,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 0 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 0 : _ref$height,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      props = _objectWithoutProperties(_ref, [\"image\", \"background\", \"alt\", \"width\", \"height\", \"className\"]);\n\n  var mainImage = React.useMemo(function () {\n    return Object.values(image.sizes).map(function (size) {\n      return {\n        url: size.url,\n        width: size.width,\n        height: size.height\n      };\n    })[0];\n  }, [image]);\n  return __jsx(\"figure\", _extends({\n    className: cn(styles.root, _defineProperty({}, styles.background, background), className)\n  }, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }), background ? __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    \"aria-hidden\": \"true\",\n    className: styles.background,\n    style: {\n      backgroundImage: \"url('\" + image.placeholder + \"')\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    title: alt || image.alt,\n    className: \"\".concat(BASE, \"__image \").concat(BASE, \"__image--lazyload\"),\n    style: {\n      backgroundImage: \"url('\" + image.placeholder + \"')\"\n    },\n    \"data-bgset\": Object.entries(image.sizes).map(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          width = _ref3[0],\n          url = _ref3[1];\n\n      return \"\".concat(url, \" \").concat(width, \"w\");\n    }).join(', '),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  })) : __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, __jsx(\"img\", {\n    \"aria-hidden\": \"true\",\n    className: \"\".concat(BASE, \"__preview\"),\n    src: image.placeholder,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 11\n    }\n  }), __jsx(\"img\", {\n    alt: alt || image.alt,\n    width: mainImage.width,\n    height: mainImage.height,\n    className: \"\".concat(BASE, \"__image \").concat(BASE, \"__image--lazyload\"),\n    \"data-sizes\": \"auto\",\n    src: image.placeholder,\n    \"data-src\": mainImage.url,\n    \"data-srcset\": Object.entries(image.sizes).map(function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n          name = _ref5[0],\n          _ref5$ = _ref5[1],\n          width = _ref5$.width,\n          url = _ref5$.url;\n\n      return \"\".concat(url, \" \").concat(width, \"w\");\n    }).join(', '),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 11\n    }\n  })));\n};\n\n_s(LazyImage, \"QxKAEmD/aHF3rJVK3i1OUwUmrPY=\");\n\n_c = LazyImage;\nexport default LazyImage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LazyImage\");","map":{"version":3,"sources":["C:/Users/admin/Documents/Dev/PWAdvent/theme/Image/LazyImage.tsx"],"names":["lazySizes","React","cn","styles","BASE","cfg","lazyClass","imageLazyload","loadingClass","imageLazyloading","loadedClass","imageLazyloaded","document","addEventListener","e","lazySizesFindParent","target","classList","add","isLoaded","el","parentElement","contains","LazyImage","image","background","alt","width","height","className","props","mainImage","useMemo","Object","values","sizes","map","size","url","root","backgroundImage","placeholder","entries","join","name"],"mappings":";;;;;;;;;;AAAA;AACA,OAAOA,SAAP,MAAsB,WAAtB;AACA,OAAO,4CAAP;AACA,OAAO,kCAAP;AACA,OAAO,sCAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,EAAP,MAAe,mBAAf;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AAEA,IAAMC,IAAI,GAAG,WAAb;AAEAJ,SAAS,CAACK,GAAV,CAAcC,SAAd,GAA0BH,MAAM,CAACI,aAAjC;AACAP,SAAS,CAACK,GAAV,CAAcG,YAAd,GAA6BL,MAAM,CAACM,gBAApC;AACAT,SAAS,CAACK,GAAV,CAAcK,WAAd,GAA4BP,MAAM,CAACQ,eAAnC;AACAC,QAAQ,CAACC,gBAAT,CAA0B,YAA1B,EAAwC,UAACC,CAAD,EAAO;AAC7CC,EAAAA,mBAAmB,CAACD,CAAC,CAACE,MAAH,CAAnB,CAA8BC,SAA9B,CAAwCC,GAAxC,CAA4Cf,MAAM,CAACgB,QAAnD;AACD,CAFD;;AAIA,IAAMJ,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACK,EAAD,EAAQ;AAClC,SAAO,CAACA,EAAE,GAAGA,EAAE,CAACC,aAAT,KAA2B,CAACD,EAAE,CAACH,SAAH,CAAaK,QAAb,CAAsBlB,IAAtB,CAAnC;AAA+D;AAA/D;;AACA,SAAOgB,EAAP;AACD,CAHD;;AAKA,IAAMG,SAAS,GAAG,SAAZA,SAAY,OAgBZ;AAAA;;AAAA,MAfJC,KAeI,QAfJA,KAeI;AAAA,6BAdJC,UAcI;AAAA,MAdJA,UAcI,gCAdS,KAcT;AAAA,MAbJC,GAaI,QAbJA,GAaI;AAAA,wBAZJC,KAYI;AAAA,MAZJA,KAYI,2BAZI,CAYJ;AAAA,yBAXJC,MAWI;AAAA,MAXJA,MAWI,4BAXK,CAWL;AAAA,4BAVJC,SAUI;AAAA,MAVJA,SAUI,+BAVQ,EAUR;AAAA,MATDC,KASC;;AACJ,MAAMC,SAAS,GAAG9B,KAAK,CAAC+B,OAAN,CAChB;AAAA,WACEC,MAAM,CAACC,MAAP,CAAcV,KAAK,CAACW,KAApB,EAA2BC,GAA3B,CAA+B,UAACC,IAAD;AAAA,aAAW;AACxCC,QAAAA,GAAG,EAAED,IAAI,CAACC,GAD8B;AAExCX,QAAAA,KAAK,EAAEU,IAAI,CAACV,KAF4B;AAGxCC,QAAAA,MAAM,EAAES,IAAI,CAACT;AAH2B,OAAX;AAAA,KAA/B,EAII,CAJJ,CADF;AAAA,GADgB,EAOhB,CAACJ,KAAD,CAPgB,CAAlB;AAUA,SACE;AACE,IAAA,SAAS,EAAEtB,EAAE,CACXC,MAAM,CAACoC,IADI,sBAERpC,MAAM,CAACsB,UAFC,EAEYA,UAFZ,GAGXI,SAHW;AADf,KAMMC,KANN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAQGL,UAAU,GACT,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,mBAAY,MADd;AAEE,IAAA,SAAS,EAAEtB,MAAM,CAACsB,UAFpB;AAGE,IAAA,KAAK,EAAE;AACLe,MAAAA,eAAe,EAAE,UAAUhB,KAAK,CAACiB,WAAhB,GAA8B;AAD1C,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAQE;AACE,IAAA,KAAK,EAAEf,GAAG,IAAIF,KAAK,CAACE,GADtB;AAEE,IAAA,SAAS,YAAKtB,IAAL,qBAAoBA,IAApB,sBAFX;AAGE,IAAA,KAAK,EAAE;AAAEoC,MAAAA,eAAe,EAAE,UAAUhB,KAAK,CAACiB,WAAhB,GAA8B;AAAjD,KAHT;AAIE,kBAAYR,MAAM,CAACS,OAAP,CAAelB,KAAK,CAACW,KAArB,EACTC,GADS,CACL;AAAA;AAAA,UAAET,KAAF;AAAA,UAASW,GAAT;;AAAA,uBAAqBA,GAArB,cAA4BX,KAA5B;AAAA,KADK,EAETgB,IAFS,CAEJ,IAFI,CAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARF,CADS,GAmBT,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,mBAAY,MADd;AAEE,IAAA,SAAS,YAAKvC,IAAL,cAFX;AAGE,IAAA,GAAG,EAAEoB,KAAK,CAACiB,WAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAME;AACE,IAAA,GAAG,EAAEf,GAAG,IAAIF,KAAK,CAACE,GADpB;AAEE,IAAA,KAAK,EAAEK,SAAS,CAACJ,KAFnB;AAGE,IAAA,MAAM,EAAEI,SAAS,CAACH,MAHpB;AAIE,IAAA,SAAS,YAAKxB,IAAL,qBAAoBA,IAApB,sBAJX;AAKE,kBAAW,MALb;AAME,IAAA,GAAG,EAAEoB,KAAK,CAACiB,WANb;AAOE,gBAAUV,SAAS,CAACO,GAPtB;AAQE,mBAAaL,MAAM,CAACS,OAAP,CAAelB,KAAK,CAACW,KAArB,EACVC,GADU,CACN;AAAA;AAAA,UAAEQ,IAAF;AAAA;AAAA,UAAUjB,KAAV,UAAUA,KAAV;AAAA,UAAiBW,GAAjB,UAAiBA,GAAjB;;AAAA,uBAA+BA,GAA/B,cAAsCX,KAAtC;AAAA,KADM,EAEVgB,IAFU,CAEL,IAFK,CARf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,CA3BJ,CADF;AAkDD,CA7ED;;GAAMpB,S;;KAAAA,S;AA+EN,eAAeA,SAAf","sourcesContent":["// @ts-ignore\nimport lazySizes from 'lazysizes';\nimport 'lazysizes/plugins/attrchange/ls.attrchange';\nimport 'lazysizes/plugins/bgset/ls.bgset';\nimport 'lazysizes/plugins/respimg/ls.respimg';\nimport React from 'react';\nimport { ApiImage } from '@comps/types';\nimport cn from '@utils/classnames';\nimport styles from './LazyImage.module.css';\n\nconst BASE = 'lazyimage';\n\nlazySizes.cfg.lazyClass = styles.imageLazyload;\nlazySizes.cfg.loadingClass = styles.imageLazyloading;\nlazySizes.cfg.loadedClass = styles.imageLazyloaded;\ndocument.addEventListener('lazyloaded', (e) => {\n  lazySizesFindParent(e.target).classList.add(styles.isLoaded);\n});\n\nconst lazySizesFindParent = (el) => {\n  while ((el = el.parentElement) && !el.classList.contains(BASE));\n  return el;\n};\n\nconst LazyImage = ({\n  image,\n  background = false,\n  alt,\n  width = 0,\n  height = 0,\n  className = '',\n  ...props\n}: {\n  image: ApiImage;\n  background?: boolean;\n  alt?: string;\n  width?: number;\n  height?: number;\n  className?: string;\n  [key: string]: any;\n}) => {\n  const mainImage = React.useMemo(\n    () =>\n      Object.values(image.sizes).map((size) => ({\n        url: size.url,\n        width: size.width,\n        height: size.height,\n      }))[0],\n    [image]\n  );\n\n  return (\n    <figure\n      className={cn(\n        styles.root,\n        { [styles.background]: background },\n        className\n      )}\n      {...props}\n    >\n      {background ? (\n        <React.Fragment>\n          <div\n            aria-hidden=\"true\"\n            className={styles.background}\n            style={{\n              backgroundImage: \"url('\" + image.placeholder + \"')\",\n            }}\n          />\n          <div\n            title={alt || image.alt}\n            className={`${BASE}__image ${BASE}__image--lazyload`}\n            style={{ backgroundImage: \"url('\" + image.placeholder + \"')\" }}\n            data-bgset={Object.entries(image.sizes)\n              .map(([width, url]) => `${url} ${width}w`)\n              .join(', ')}\n          />\n        </React.Fragment>\n      ) : (\n        <React.Fragment>\n          <img\n            aria-hidden=\"true\"\n            className={`${BASE}__preview`}\n            src={image.placeholder}\n          />\n          <img\n            alt={alt || image.alt}\n            width={mainImage.width}\n            height={mainImage.height}\n            className={`${BASE}__image ${BASE}__image--lazyload`}\n            data-sizes=\"auto\"\n            src={image.placeholder}\n            data-src={mainImage.url}\n            data-srcset={Object.entries(image.sizes)\n              .map(([name, { width, url }]) => `${url} ${width}w`)\n              .join(', ')}\n          />\n        </React.Fragment>\n      )}\n    </figure>\n  );\n};\n\nexport default LazyImage;\n"]},"metadata":{},"sourceType":"module"}