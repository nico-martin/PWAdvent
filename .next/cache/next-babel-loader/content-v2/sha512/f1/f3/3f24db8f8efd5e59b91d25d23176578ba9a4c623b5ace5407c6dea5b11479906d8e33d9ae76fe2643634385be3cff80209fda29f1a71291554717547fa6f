{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Documents\\\\Dev\\\\PWAdvent\\\\theme\\\\Image\\\\LazyImage.tsx\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n// @ts-ignore\n\n/*\nimport lazySizes from 'lazysizes';\nimport 'lazysizes/plugins/attrchange/ls.attrchange';\nimport 'lazysizes/plugins/bgset/ls.bgset';\nimport 'lazysizes/plugins/respimg/ls.respimg';*/\nimport React from 'react';\nimport cn from '@utils/classnames';\nimport styles from './LazyImage.module.css';\nconst BASE = 'lazyimage';\n/*\nlazySizes.cfg.lazyClass = styles.imageLazyload;\nlazySizes.cfg.loadingClass = styles.imageLazyloading;\nlazySizes.cfg.loadedClass = styles.imageLazyloaded;\ndocument.addEventListener('lazyloaded', (e) => {\n  lazySizesFindParent(e.target).classList.add(styles.isLoaded);\n});*/\n\nconst lazySizesFindParent = el => {\n  while ((el = el.parentElement) && !el.classList.contains(BASE));\n\n  return el;\n};\n\nconst LazyImage = (_ref) => {\n  let {\n    image,\n    background = false,\n    alt,\n    width = 0,\n    height = 0,\n    className = ''\n  } = _ref,\n      props = _objectWithoutProperties(_ref, [\"image\", \"background\", \"alt\", \"width\", \"height\", \"className\"]);\n\n  const mainImage = React.useMemo(() => Object.values(image.sizes).map(size => ({\n    url: size.url,\n    width: size.width,\n    height: size.height\n  }))[0], [image]);\n  return __jsx(\"figure\", _extends({\n    className: cn(styles.root, {\n      [styles.background]: background\n    }, className)\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }\n  }), background ? __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    \"aria-hidden\": \"true\",\n    className: styles.background,\n    style: {\n      backgroundImage: \"url('\" + image.placeholder + \"')\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    title: alt || image.alt,\n    className: cn(styles.image, styles.imageLazyload),\n    style: {\n      backgroundImage: \"url('\" + image.placeholder + \"')\"\n    },\n    \"data-bgset\": Object.entries(image.sizes).map(([width, url]) => `${url} ${width}w`).join(', '),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  })) : __jsx(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 9\n    }\n  }, __jsx(\"img\", {\n    \"aria-hidden\": \"true\",\n    className: styles.preview,\n    src: image.placeholder,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }), __jsx(\"img\", {\n    alt: alt || image.alt,\n    width: mainImage.width,\n    height: mainImage.height,\n    className: cn(styles.image, styles.imageLazyload),\n    \"data-sizes\": \"auto\",\n    src: image.placeholder,\n    \"data-src\": mainImage.url,\n    \"data-srcset\": Object.entries(image.sizes).map(([name, {\n      width,\n      url\n    }]) => `${url} ${width}w`).join(', '),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 11\n    }\n  })));\n};\n\nexport default LazyImage;","map":{"version":3,"sources":["C:/Users/admin/Documents/Dev/PWAdvent/theme/Image/LazyImage.tsx"],"names":["React","cn","styles","BASE","lazySizesFindParent","el","parentElement","classList","contains","LazyImage","image","background","alt","width","height","className","props","mainImage","useMemo","Object","values","sizes","map","size","url","root","backgroundImage","placeholder","imageLazyload","entries","join","preview","name"],"mappings":"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","sourcesContent":["// @ts-ignore\n\n/*\nimport lazySizes from 'lazysizes';\nimport 'lazysizes/plugins/attrchange/ls.attrchange';\nimport 'lazysizes/plugins/bgset/ls.bgset';\nimport 'lazysizes/plugins/respimg/ls.respimg';*/\nimport React from 'react';\nimport { ApiImage } from '@comps/types';\nimport cn from '@utils/classnames';\nimport styles from './LazyImage.module.css';\n\nconst BASE = 'lazyimage';\n\n/*\nlazySizes.cfg.lazyClass = styles.imageLazyload;\nlazySizes.cfg.loadingClass = styles.imageLazyloading;\nlazySizes.cfg.loadedClass = styles.imageLazyloaded;\ndocument.addEventListener('lazyloaded', (e) => {\n  lazySizesFindParent(e.target).classList.add(styles.isLoaded);\n});*/\n\nconst lazySizesFindParent = (el) => {\n  while ((el = el.parentElement) && !el.classList.contains(BASE));\n  return el;\n};\n\nconst LazyImage = ({\n  image,\n  background = false,\n  alt,\n  width = 0,\n  height = 0,\n  className = '',\n  ...props\n}: {\n  image: ApiImage;\n  background?: boolean;\n  alt?: string;\n  width?: number;\n  height?: number;\n  className?: string;\n  [key: string]: any;\n}) => {\n  const mainImage = React.useMemo(\n    () =>\n      Object.values(image.sizes).map((size) => ({\n        url: size.url,\n        width: size.width,\n        height: size.height,\n      }))[0],\n    [image]\n  );\n\n  return (\n    <figure\n      className={cn(\n        styles.root,\n        { [styles.background]: background },\n        className\n      )}\n      {...props}\n    >\n      {background ? (\n        <React.Fragment>\n          <div\n            aria-hidden=\"true\"\n            className={styles.background}\n            style={{\n              backgroundImage: \"url('\" + image.placeholder + \"')\",\n            }}\n          />\n          <div\n            title={alt || image.alt}\n            className={cn(styles.image, styles.imageLazyload)}\n            style={{ backgroundImage: \"url('\" + image.placeholder + \"')\" }}\n            data-bgset={Object.entries(image.sizes)\n              .map(([width, url]) => `${url} ${width}w`)\n              .join(', ')}\n          />\n        </React.Fragment>\n      ) : (\n        <React.Fragment>\n          <img\n            aria-hidden=\"true\"\n            className={styles.preview}\n            src={image.placeholder}\n          />\n          <img\n            alt={alt || image.alt}\n            width={mainImage.width}\n            height={mainImage.height}\n            className={cn(styles.image, styles.imageLazyload)}\n            data-sizes=\"auto\"\n            src={image.placeholder}\n            data-src={mainImage.url}\n            data-srcset={Object.entries(image.sizes)\n              .map(([name, { width, url }]) => `${url} ${width}w`)\n              .join(', ')}\n          />\n        </React.Fragment>\n      )}\n    </figure>\n  );\n};\n\nexport default LazyImage;\n"]},"metadata":{},"sourceType":"module"}