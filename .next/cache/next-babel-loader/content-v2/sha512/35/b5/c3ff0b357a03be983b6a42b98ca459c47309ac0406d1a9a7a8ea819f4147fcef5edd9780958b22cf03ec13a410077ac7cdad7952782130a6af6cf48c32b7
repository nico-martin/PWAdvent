{"ast":null,"code":"import _extends from \"C:/Users/admin/Documents/Dev/PWAdvent/node_modules/@babel/runtime/helpers/esm/extends\";\nimport _slicedToArray from \"C:/Users/admin/Documents/Dev/PWAdvent/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectWithoutProperties from \"C:/Users/admin/Documents/Dev/PWAdvent/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\admin\\\\Documents\\\\Dev\\\\PWAdvent\\\\theme\\\\Image\\\\LazyImage.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n// @ts-ignore\nimport lazySizes from 'lazysizes';\nimport 'lazysizes/plugins/attrchange/ls.attrchange';\nimport 'lazysizes/plugins/bgset/ls.bgset';\nimport 'lazysizes/plugins/respimg/ls.respimg';\nimport React from 'react';\nimport styles from './LazyImage.module.css';\nvar BASE = 'lazyimage';\nlazySizes.cfg.lazyClass = styles.imageLazyloaded;\nlazySizes.cfg.loadingClass = \"\".concat(BASE, \"__image--lazyloading\");\nlazySizes.cfg.loadedClass = \"\".concat(BASE, \"__image--lazyloaded\");\ndocument.addEventListener('lazyloaded', function (e) {\n  lazySizesFindParent(e.target).classList.add(\"\".concat(BASE, \"--loaded\"));\n});\n\nvar lazySizesFindParent = function lazySizesFindParent(el) {\n  while ((el = el.parentElement) && !el.classList.contains(BASE)) {\n    ;\n  }\n\n  return el;\n};\n\nvar LazyImage = function LazyImage(_ref) {\n  _s();\n\n  var image = _ref.image,\n      _ref$background = _ref.background,\n      background = _ref$background === void 0 ? false : _ref$background,\n      alt = _ref.alt,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 0 : _ref$width,\n      _ref$height = _ref.height,\n      height = _ref$height === void 0 ? 0 : _ref$height,\n      _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className,\n      props = _objectWithoutProperties(_ref, [\"image\", \"background\", \"alt\", \"width\", \"height\", \"className\"]);\n\n  var mainImage = React.useMemo(function () {\n    return Object.values(image.sizes).map(function (size) {\n      return {\n        url: size.url,\n        width: size.width,\n        height: size.height\n      };\n    })[0];\n  }, [image]);\n  return __jsx(\"figure\", _extends({\n    className: \"\".concat(BASE, \" \").concat(background ? \"\".concat(BASE, \"--background\") : '', \" \").concat(className)\n  }, props, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }), background ? __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    \"aria-hidden\": \"true\",\n    className: \"\".concat(BASE, \"__preview\"),\n    style: {\n      backgroundImage: \"url('\" + image.placeholder + \"')\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }), __jsx(\"div\", {\n    title: alt || image.alt,\n    className: \"\".concat(BASE, \"__image \").concat(BASE, \"__image--lazyload\"),\n    style: {\n      backgroundImage: \"url('\" + image.placeholder + \"')\"\n    },\n    \"data-bgset\": Object.entries(image.sizes).map(function (_ref2) {\n      var _ref3 = _slicedToArray(_ref2, 2),\n          width = _ref3[0],\n          url = _ref3[1];\n\n      return \"\".concat(url, \" \").concat(width, \"w\");\n    }).join(', '),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  })) : __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, __jsx(\"img\", {\n    \"aria-hidden\": \"true\",\n    className: \"\".concat(BASE, \"__preview\"),\n    src: image.placeholder,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  }), __jsx(\"img\", {\n    alt: alt || image.alt,\n    width: mainImage.width,\n    height: mainImage.height,\n    className: \"\".concat(BASE, \"__image \").concat(BASE, \"__image--lazyload\"),\n    \"data-sizes\": \"auto\",\n    src: image.placeholder,\n    \"data-src\": mainImage.url,\n    \"data-srcset\": Object.entries(image.sizes).map(function (_ref4) {\n      var _ref5 = _slicedToArray(_ref4, 2),\n          name = _ref5[0],\n          _ref5$ = _ref5[1],\n          width = _ref5$.width,\n          url = _ref5$.url;\n\n      return \"\".concat(url, \" \").concat(width, \"w\");\n    }).join(', '),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  })));\n};\n\n_s(LazyImage, \"QxKAEmD/aHF3rJVK3i1OUwUmrPY=\");\n\n_c = LazyImage;\nexport default LazyImage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LazyImage\");","map":{"version":3,"sources":["C:/Users/admin/Documents/Dev/PWAdvent/theme/Image/LazyImage.tsx"],"names":["lazySizes","React","styles","BASE","cfg","lazyClass","imageLazyloaded","loadingClass","loadedClass","document","addEventListener","e","lazySizesFindParent","target","classList","add","el","parentElement","contains","LazyImage","image","background","alt","width","height","className","props","mainImage","useMemo","Object","values","sizes","map","size","url","backgroundImage","placeholder","entries","join","name"],"mappings":"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","sourcesContent":["// @ts-ignore\nimport lazySizes from 'lazysizes';\nimport 'lazysizes/plugins/attrchange/ls.attrchange';\nimport 'lazysizes/plugins/bgset/ls.bgset';\nimport 'lazysizes/plugins/respimg/ls.respimg';\nimport React from 'react';\nimport { ApiImage } from '@comps/types';\nimport styles from './LazyImage.module.css';\n\nconst BASE = 'lazyimage';\n\nlazySizes.cfg.lazyClass = styles.imageLazyloaded;\nlazySizes.cfg.loadingClass = `${BASE}__image--lazyloading`;\nlazySizes.cfg.loadedClass = `${BASE}__image--lazyloaded`;\ndocument.addEventListener('lazyloaded', (e) => {\n  lazySizesFindParent(e.target).classList.add(`${BASE}--loaded`);\n});\n\nconst lazySizesFindParent = (el) => {\n  while ((el = el.parentElement) && !el.classList.contains(BASE));\n  return el;\n};\n\nconst LazyImage = ({\n  image,\n  background = false,\n  alt,\n  width = 0,\n  height = 0,\n  className = '',\n  ...props\n}: {\n  image: ApiImage;\n  background?: boolean;\n  alt?: string;\n  width?: number;\n  height?: number;\n  className?: string;\n  [key: string]: any;\n}) => {\n  const mainImage = React.useMemo(\n    () =>\n      Object.values(image.sizes).map((size) => ({\n        url: size.url,\n        width: size.width,\n        height: size.height,\n      }))[0],\n    [image]\n  );\n\n  return (\n    <figure\n      className={`${BASE} ${\n        background ? `${BASE}--background` : ''\n      } ${className}`}\n      {...props}\n    >\n      {background ? (\n        <React.Fragment>\n          <div\n            aria-hidden=\"true\"\n            className={`${BASE}__preview`}\n            style={{\n              backgroundImage: \"url('\" + image.placeholder + \"')\",\n            }}\n          />\n          <div\n            title={alt || image.alt}\n            className={`${BASE}__image ${BASE}__image--lazyload`}\n            style={{ backgroundImage: \"url('\" + image.placeholder + \"')\" }}\n            data-bgset={Object.entries(image.sizes)\n              .map(([width, url]) => `${url} ${width}w`)\n              .join(', ')}\n          />\n        </React.Fragment>\n      ) : (\n        <React.Fragment>\n          <img\n            aria-hidden=\"true\"\n            className={`${BASE}__preview`}\n            src={image.placeholder}\n          />\n          <img\n            alt={alt || image.alt}\n            width={mainImage.width}\n            height={mainImage.height}\n            className={`${BASE}__image ${BASE}__image--lazyload`}\n            data-sizes=\"auto\"\n            src={image.placeholder}\n            data-src={mainImage.url}\n            data-srcset={Object.entries(image.sizes)\n              .map(([name, { width, url }]) => `${url} ${width}w`)\n              .join(', ')}\n          />\n        </React.Fragment>\n      )}\n    </figure>\n  );\n};\n\nexport default LazyImage;\n"]},"metadata":{},"sourceType":"module"}