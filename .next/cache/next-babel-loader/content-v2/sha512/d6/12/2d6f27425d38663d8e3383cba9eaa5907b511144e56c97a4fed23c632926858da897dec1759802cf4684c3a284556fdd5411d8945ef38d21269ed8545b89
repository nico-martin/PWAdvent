{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/admin/Documents/Dev/PWAdvent/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Users/admin/Documents/Dev/PWAdvent/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:/Users/admin/Documents/Dev/PWAdvent/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\admin\\\\Documents\\\\Dev\\\\PWAdvent\\\\components\\\\About\\\\EmailSignup.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { Button, Form, FormControls, FormField, FormFieldset, InputText, Notification } from '@theme';\nimport cn from '@utils/classnames';\nimport { apiBase } from '@utils/constants';\nimport styles from './EmailSignup.module.css';\n\nvar EmailSignup = function EmailSignup(_ref) {\n  _s();\n\n  var _ref$className = _ref.className,\n      className = _ref$className === void 0 ? '' : _ref$className;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  var _React$useState3 = React.useState(''),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      formSuccess = _React$useState4[0],\n      setFormSuccess = _React$useState4[1];\n\n  var _React$useState5 = React.useState(''),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      formError = _React$useState6[0],\n      setFormError = _React$useState6[1];\n\n  return __jsx(\"div\", {\n    className: cn(className),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: cn(styles.content),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 22,\n      columnNumber: 7\n    }\n  }, __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 9\n    }\n  }, \"Are you excited for Progressive Web Apps? Let's get ready for PWAdvent! 24 features in 24 days.\"), __jsx(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 9\n    }\n  }, \"Make sure to subscribe and get notified as soon as a new feature is published.\")), formError !== '' ? __jsx(Notification, {\n    className: cn(styles.notification),\n    type: \"error\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }, formError) : formSuccess !== '' ? __jsx(Notification, {\n    className: cn(styles.notification),\n    type: \"success\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }, formSuccess) : __jsx(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, __jsx(Form, {\n    className: cn(styles.form),\n    onSubmit: /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(data) {\n        var resp;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                setLoading(true);\n                setFormSuccess('');\n                setFormError('');\n                _context.prev = 3;\n                _context.next = 6;\n                return fetch(\"\".concat(apiBase, \"wp-json/advent-calendar/v1/email-notification/\"), {\n                  method: 'post',\n                  body: JSON.stringify({\n                    email: data.email,\n                    timezoneOffset: new Date().getTimezoneOffset()\n                  }),\n                  headers: {\n                    'Content-Type': 'application/json'\n                  }\n                });\n\n              case 6:\n                resp = _context.sent;\n\n                if (resp.status === 409) {\n                  setFormSuccess('Thank you very much. Your email has already been registered.');\n                } else if (resp.status === 200) {\n                  setFormSuccess('Thank you very much. You will receive an email shortly, in which you can confirm your address');\n                } else {\n                  new Error();\n                }\n\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](3);\n                setFormError('Oops.. Something went wrong. Please try again later.');\n\n              case 13:\n                setLoading(false);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[3, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }(),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 11\n    }\n  }, __jsx(FormFieldset, {\n    stacked: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }, __jsx(FormField, {\n    name: \"email\",\n    label: \"Email\",\n    component: InputText,\n    disabled: loading,\n    type: \"email\",\n    register: {\n      required: 'This value is required',\n      pattern: {\n        value: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n        message: 'This needs to be a valid Email adress'\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 15\n    }\n  }), __jsx(FormControls, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 15\n    }\n  }, __jsx(Button, {\n    type: \"submit\",\n    loading: loading,\n    disabled: loading,\n    icon: \"mdi/send\",\n    iconRight: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 17\n    }\n  }, \"Submit\")))), __jsx(\"p\", {\n    className: cn(styles.disclaimer),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 11\n    }\n  }, \"We use your email exclusively to send you the link to the published entry every morning between 2020-12-01 and 2020-12-24. You can cancel this service at any time, your data will not be passed on to third parties.\")));\n};\n\n_s(EmailSignup, \"f5dnyrQj+9Wk+lbhG1ox9qHi+mo=\");\n\n_c = EmailSignup;\nexport default EmailSignup;\n\nvar _c;\n\n$RefreshReg$(_c, \"EmailSignup\");","map":{"version":3,"sources":["C:/Users/admin/Documents/Dev/PWAdvent/components/About/EmailSignup.tsx"],"names":["React","Button","Form","FormControls","FormField","FormFieldset","InputText","Notification","cn","apiBase","styles","EmailSignup","className","useState","loading","setLoading","formSuccess","setFormSuccess","formError","setFormError","content","notification","form","data","fetch","method","body","JSON","stringify","email","timezoneOffset","Date","getTimezoneOffset","headers","resp","status","Error","required","pattern","value","message","disclaimer"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {\n  Button,\n  Form,\n  FormControls,\n  FormField,\n  FormFieldset,\n  InputText,\n  Notification,\n} from '@theme';\nimport cn from '@utils/classnames';\nimport { apiBase } from '@utils/constants';\nimport styles from './EmailSignup.module.css';\n\nconst EmailSignup = ({ className = '' }: { className?: string }) => {\n  const [loading, setLoading] = React.useState<boolean>(false);\n  const [formSuccess, setFormSuccess] = React.useState<string>('');\n  const [formError, setFormError] = React.useState<string>('');\n\n  return (\n    <div className={cn(className)}>\n      <div className={cn(styles.content)}>\n        <p>\n          Are you excited for Progressive Web Apps? Let's get ready for\n          PWAdvent! 24 features in 24 days.\n        </p>\n        <p>\n          Make sure to subscribe and get notified as soon as a new feature is\n          published.\n        </p>\n      </div>\n      {formError !== '' ? (\n        <Notification className={cn(styles.notification)} type=\"error\">\n          {formError}\n        </Notification>\n      ) : formSuccess !== '' ? (\n        <Notification className={cn(styles.notification)} type=\"success\">\n          {formSuccess}\n        </Notification>\n      ) : (\n        <React.Fragment>\n          <Form\n            className={cn(styles.form)}\n            onSubmit={async (data) => {\n              setLoading(true);\n              setFormSuccess('');\n              setFormError('');\n\n              try {\n                const resp = await fetch(\n                  `${apiBase}wp-json/advent-calendar/v1/email-notification/`,\n                  {\n                    method: 'post',\n                    body: JSON.stringify({\n                      email: data.email,\n                      timezoneOffset: new Date().getTimezoneOffset(),\n                    }),\n                    headers: {\n                      'Content-Type': 'application/json',\n                    },\n                  }\n                );\n                if (resp.status === 409) {\n                  setFormSuccess(\n                    'Thank you very much. Your email has already been registered.'\n                  );\n                } else if (resp.status === 200) {\n                  setFormSuccess(\n                    'Thank you very much. You will receive an email shortly, in which you can confirm your address'\n                  );\n                } else {\n                  new Error();\n                }\n              } catch (e) {\n                setFormError(\n                  'Oops.. Something went wrong. Please try again later.'\n                );\n              }\n              setLoading(false);\n            }}\n          >\n            <FormFieldset stacked>\n              <FormField\n                name=\"email\"\n                label=\"Email\"\n                component={InputText}\n                disabled={loading}\n                type=\"email\"\n                register={{\n                  required: 'This value is required',\n                  pattern: {\n                    value:\n                      /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n                    message: 'This needs to be a valid Email adress',\n                  },\n                }}\n              />\n              <FormControls>\n                <Button\n                  type=\"submit\"\n                  loading={loading}\n                  disabled={loading}\n                  icon=\"mdi/send\"\n                  iconRight\n                >\n                  Submit\n                </Button>\n              </FormControls>\n            </FormFieldset>\n          </Form>\n          <p className={cn(styles.disclaimer)}>\n            We use your email exclusively to send you the link to the published\n            entry every morning between 2020-12-01 and 2020-12-24. You can\n            cancel this service at any time, your data will not be passed on to\n            third parties.\n          </p>\n        </React.Fragment>\n      )}\n    </div>\n  );\n};\n\nexport default EmailSignup;\n"]},"metadata":{},"sourceType":"module"}